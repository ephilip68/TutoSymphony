{% extends 'admin/admin.html.twig' %}

{% block title %} Catégories {% endblock %}

{% block body %}
<div class="container flash-messages">
    {% include 'partials/flash.html.twig' %}
</div>

<div class="container" style="padding-top: 2rem;">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="fw-bold" style="color: #2e7d32; font-family: 'Playfair Display', serif;">Toutes les catégories</h1>
        <a class="btn btn-primary" href="{{ path('admin.category.create') }}">
            <i class="fas fa-plus"></i> Nouvelle catégorie
        </a>
    </div>
   <div class="table-responsive">
        <table class="table table-hover align-middle text-center" style="--bs-table-hover-bg: #e6f4ea;">
            <thead class="table-success">
                <tr>
                    <th>Images</th>
                    <th>Nom</th>
                    <th>Recettes</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for category in categories %}

                <tr>
                    <td>
                        {% if category.thumbnail %}
                            <img src="{{ asset('images/categories/' ~ category.thumbnail) | imagine_filter('thumb_100x100') }}"
                                class="rounded" style="width: 60px; height: 60px; object-fit: cover;">
                        {% else %}
                            <img src="{{ asset('images/default-recipe.webp') | imagine_filter('thumb_100x100') }}"
                                class="rounded" style="width: 60px; height: 60px; object-fit: cover;">
                        {% endif %}
                    </td>
                    <td>
                        <strong>{{ category.name }}</strong>
                    </td>
                    <td>
                        {{ category.count }}
                    </td>
                    <td>
                        <div class="d-flex justify-content-center gap-2">
                            <a href="{{ path('admin.category.edit', { id: category.id }) }}"
                               class="btn btn-outline-primary btn-sm"
                               style="width: 35px; height: 35px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-edit"></i>
                            </a>
                            <form action="{{ path('admin.category.delete', { id: category.id }) }}" method="post" onsubmit="return confirm('Supprimer cette recette ?');">
                                <input type="hidden" name="_method" value="DELETE">
                                <button type="submit"
                                        class="btn btn-outline-danger btn-sm"
                                        style="width: 35px; height: 35px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
            </tbody>
            {% endfor%}
        </table>
    </div>
</div>    
{% endblock %}